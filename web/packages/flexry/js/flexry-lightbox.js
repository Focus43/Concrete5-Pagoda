/*! concrete5_project - Build v0.0.6 (2014-03-09) */
!function(a){function b(b,c){function d(){return q.gallery&&h()["1"]?(a(".gallery-arrows",r).on("click",function(b){b.stopPropagation(),b.preventDefault();var c=h();a(this).hasClass("prev")?g(c[n-1]||c[o]):g(c[n+1]||c[0])}),q.galleryMarkers&&(a.each(h(),function(b,c){a.when(e(c.src_thumb)).done(function(b){var d=a('<div class="m" data-cache="'+c.index+'"><div class="t"></div></div>');a(".t",d).append(b),r.$_markersInner.append(d)})}),r.$_markersInner.on("click",function(b){b.stopPropagation(),b.preventDefault(),a(b.target).hasClass("m")&&g(h()[b.target.getAttribute("data-cache")])})),void 0):(r.removeClass("arrows markers"),void 0)}function e(b){return m[b]||(m[b]=a.Deferred(function(a){a.notify();var c=new Image;c.onload=function(){a.resolve(c)},c.src=b}).promise()),m[b]}function f(b){return a.Deferred(function(a){setTimeout(function(){a.resolve()},b||+q.transitionDuration)}).promise()}function g(b){s||(s=!0,n=b.index,r.setStatus(j),a.when(e(b.src_full),f(0)).done(function(){var c=new Image;c.src=b.src_full,c.className="primary-img",a("img.primary-img",r.$_content).replaceWith(c),q.captions&&(r.$_captionContainer.css({maxWidth:c.clientWidth,height:c.clientHeight}),r.$_caption1.text(b.title),r.$_caption2.text(b.descr),0===c.clientHeight&&!function d(){setTimeout(function(){return c.clientHeight>=1?(r.$_captionContainer.css({maxWidth:c.clientWidth,height:c.clientHeight}),void 0):(d(),void 0)},100)}()),s=!1,r.setStatus(k)}))}function h(c){return p&&c!==!0||(p={},a(q.itemTargets,b).each(function(b,c){c.setAttribute("data-flexrylb",b),p[b]={index:b,title:a(".title",c).text()||"",descr:a(".descr",c).text()||"",src_thumb:a("img",c).attr("src"),src_full:c.getAttribute("data-src-full")},o=b})),p}var i=this,j=!1,k=!0,l=200,m={},n=null,o=0,p=!1,q=a.extend(!0,{},{maskColor:"#2a2a2a",maskOpacity:.85,maskFadeSpeed:250,closeOnClick:!0,itemTargets:".lightbox-item",transitionEffect:"",transitionDuration:l,captions:!0,gallery:!0,galleryMarkers:!0,galleryMarkersThumb:{w:160,h:100}},c),r=function(){function c(){if(+q.transitionDuration!==l){var b=["-webkit-","-moz-","-o-","-ms-",""],c=q.transitionDuration/1e3,d=c/2;a(".modal-container, .content",g).attr("style",b.join("transition-duration: "+c+"s;")),a(".loader-container",g).attr("style",b.join("transition-duration: "+d+"s;"))}}function e(){return f||(f=a.Deferred(function(b){g.attr("id","flexryLightbox-"+(new Date).getTime()),g.appendTo("body"),a(".masker",g).css({background:q.maskColor,opacity:q.maskOpacity});var e=q.closeOnClick?g:a(".closer",g);e.on("click",function(b){var c=a(b.target);c.hasClass("primary-img")||c.hasClass("caption-container")||g.close()}),c(),d(),b.resolve()}).promise()),f}var f,g=a("<div />",{"class":["flexry-lightbox",q.transitionEffect,q.captions?"captions":"",q.gallery?"arrows":"",q.galleryMarkers?"markers":""].join(" "),html:'<div class="masker"></div><div class="modal-container"><div class="content"><a class="gallery-arrows prev"></a><a class="gallery-arrows next"></a><div class="caption-container"><div class="caption title"><span></span></div><div class="caption descr"><span></span></div></div><img class="primary-img" /></div></div><div class="loader-container"><div class="inner"></div></div><a class="closer"><span>Close</span></a><div class="gallery-markers"><div class="m-inner"></div></div>'});return g.open=function(){return a.Deferred(function(c){e().done(function(){a("html").addClass("flexry-lb-active"),g.setStatus(j).fadeIn(q.maskFadeSpeed,function(){c.resolve(),b.trigger("flexry_lightbox_open")})})}).promise()},g.close=function(){return a("html").removeClass("flexry-lb-active"),g.setStatus(j).fadeOut(q.maskFadeSpeed,function(){b.trigger("flexry_lightbox_close")})},g.setStatus=function(a){return g.toggleClass("loaded",a===k),g},g.$_content=a(".content",g),g.$_captionContainer=a(".caption-container",g),g.$_caption1=a(".title span",g),g.$_caption2=a(".descr span",g),g.$_markersInner=a(".m-inner",g),g}(),s=!1;return b.on("click",q.itemTargets,function(){var a=h(),b=this.getAttribute("data-flexrylb");r.open().then(function(){g(a[b])})}),{listCache:h,instance:i,$container:function(){return r},settings:function(){return q},currentIndex:function(){return n},rescanItems:function(){return h(!0)},listDataLength:function(){return o}}}a.fn.flexryLightbox=function(c){return this.each(function(d,e){var f=a(e),g=new b(f,c);f.data("flexryLightbox",g)})}}(jQuery);